# Script ƒë·ªÉ test email verification v·ªõi token gi·∫£
Write-Host "üß™ Testing email verification with manual token..." -ForegroundColor Yellow

# Test v·ªõi token gi·∫£
$testToken = "ac7115e6-7b4e-4110-8b57-6f7a6e0a2ef7"
$testUrl = "http://localhost:5173/verify-email?token=$testToken"

Write-Host "`nüåê Test URL: $testUrl" -ForegroundColor Cyan

# M·ªü URL trong browser
Write-Host "`nüåê Opening verification URL in browser..." -ForegroundColor Blue
Start-Process $testUrl

Write-Host "`nüìã Expected behavior:" -ForegroundColor Blue
Write-Host "1. Page should load with token from URL" -ForegroundColor White
Write-Host "2. Should show 'ƒêang x√°c th·ª±c email...' message" -ForegroundColor White
Write-Host "3. Should show success message with green checkmark" -ForegroundColor White
Write-Host "4. Should show 'Ti·∫øp t·ª•c ƒëƒÉng nh·∫≠p' button" -ForegroundColor White
Write-Host "5. Should show 'V·ªÅ trang ch·ªß' button" -ForegroundColor White
Write-Host "6. Should NOT automatically redirect to login" -ForegroundColor White

Write-Host "`nüîç Debug steps:" -ForegroundColor Blue
Write-Host "1. Open browser developer tools (F12)" -ForegroundColor White
Write-Host "2. Go to Console tab" -ForegroundColor White
Write-Host "3. Check console logs for EmailVerification messages" -ForegroundColor White
Write-Host "4. Check if verificationStatus changes to 'success'" -ForegroundColor White
Write-Host "5. Check if success UI is rendered" -ForegroundColor White
Write-Host "6. Check if there's a redirect after success" -ForegroundColor White

Write-Host "`nüéØ Key console logs to look for:" -ForegroundColor Blue
Write-Host "[EmailVerification] Token from URL: $testToken" -ForegroundColor Cyan
Write-Host "[EmailVerification] Auto-verifying token from URL..." -ForegroundColor Cyan
Write-Host "[EmailVerification] handleVerifyEmail called with token: $testToken" -ForegroundColor Cyan
Write-Host "[EmailVerification] Setting status to verifying..." -ForegroundColor Cyan
Write-Host "[EmailVerification] API response: ..." -ForegroundColor Cyan
Write-Host "[EmailVerification] Verification successful! Setting success status..." -ForegroundColor Cyan
Write-Host "[EmailVerification] Success status set, no auto-redirect" -ForegroundColor Cyan

Write-Host "`nüîç Test URLs:" -ForegroundColor Blue
Write-Host "With token: $testUrl" -ForegroundColor Cyan
Write-Host "Without token: http://localhost:5173/verify-email" -ForegroundColor Cyan
Write-Host "With invalid token: http://localhost:5173/verify-email?token=invalid" -ForegroundColor Cyan

Write-Host "`nüèÅ Test script completed" -ForegroundColor Green
