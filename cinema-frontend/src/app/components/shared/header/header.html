<header class="header">
  <div class="header-container">
    <!-- Logo Section -->
    <div class="logo-section">
      <div class="logo">
        <a routerLink="/">
          <h1>üé¨ MOTCHILL PHIM ONLINE</h1>
        </a>
      </div>
    </div>

    <!-- Search Bar Section -->
    <div class="search-section">
      <div class="search-container">
        <input 
          type="text" 
          placeholder="Nh·∫≠p t√™n phim b·∫°n mu·ªën t√¨m ki·∫øm..." 
          class="search-input"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()">
        <button class="search-button" (click)="onSearch()">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>

    <!-- User Actions Section -->
    <div class="user-actions">
      <!-- Show auth modal button when not logged in -->
      <div *ngIf="!isLoggedIn" class="auth-buttons">
        <button class="btn-login" (click)="openAuthModal()">
          <i class="fas fa-sign-in-alt"></i>
          <span>ƒêƒÉng nh·∫≠p</span>
        </button>
        <button class="btn-register" (click)="openAuthModal('register')">
          <i class="fas fa-user-plus"></i>
          <span>ƒêƒÉng k√Ω</span>
        </button>
        <button class="btn-bookmark">
          <i class="fas fa-bookmark"></i>
        </button>
      </div>

      <!-- Show user dropdown when logged in -->
      <div *ngIf="isLoggedIn" class="user-dropdown-container">
        <button class="btn-account logged-in" (click)="toggleUserDropdown()">
          <i class="fas fa-user-circle"></i> 
          <span>{{ userInfo?.username || 'T√†i kho·∫£n' }}</span>
          <i class="fas fa-chevron-down dropdown-arrow" [class.rotated]="showUserDropdown"></i>
        </button>
        
        <div class="user-dropdown" [class.show]="showUserDropdown" (click)="$event.stopPropagation()">
          <div class="dropdown-header">
            <i class="fas fa-user-circle"></i>
            <span>{{ userInfo?.username || 'Ng∆∞·ªùi d√πng' }}</span>
          </div>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" (click)="onAccountInfo(); closeUserDropdown()">
            <i class="fas fa-user"></i>
            <span>Th√¥ng tin t√†i kho·∫£n</span>
          </a>
          <a class="dropdown-item" (click)="onMyTickets(); closeUserDropdown()">
            <i class="fas fa-ticket-alt"></i>
            <span>V√© c·ªßa t√¥i</span>
          </a>
          <a class="dropdown-item" (click)="onHelp(); closeUserDropdown()">
            <i class="fas fa-question-circle"></i>
            <span>Li√™n h·ªá gi√∫p ƒë·ª°</span>
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item logout" (click)="onLogout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>ƒêƒÉng xu·∫•t</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Navigation Bar -->
  <nav class="main-navigation">
    <div class="nav-container">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
        <span>TRANG CH·ª¶</span>
      </a>
      <div class="nav-item dropdown">
        <span>TH·ªÇ LO·∫†I <i class="fas fa-chevron-down"></i></span>
        <div class="dropdown-menu">
          <a routerLink="/movies" [queryParams]="{genre: 'Action'}">H√†nh ƒë·ªông</a>
          <a routerLink="/movies" [queryParams]="{genre: 'Comedy'}">H√†i h∆∞·ªõc</a>
          <a routerLink="/movies" [queryParams]="{genre: 'Drama'}">T√¢m l√Ω</a>
          <a routerLink="/movies" [queryParams]="{genre: 'Horror'}">Kinh d·ªã</a>
          <a routerLink="/movies" [queryParams]="{genre: 'Romance'}">T√¨nh c·∫£m</a>
        </div>
      </div>
      <div class="nav-item dropdown">
        <span>QU·ªêC GIA <i class="fas fa-chevron-down"></i></span>
        <div class="dropdown-menu">
          <a routerLink="/movies" [queryParams]="{country: 'Vietnam'}">Vi·ªát Nam</a>
          <a routerLink="/movies" [queryParams]="{country: 'USA'}">M·ªπ</a>
          <a routerLink="/movies" [queryParams]="{country: 'Korea'}">H√†n Qu·ªëc</a>
          <a routerLink="/movies" [queryParams]="{country: 'China'}">Trung Qu·ªëc</a>
          <a routerLink="/movies" [queryParams]="{country: 'Japan'}">Nh·∫≠t B·∫£n</a>
        </div>
      </div>
      <a routerLink="/movies" [queryParams]="{status: 'now-showing'}" routerLinkActive="active" class="nav-item">
        <span>PHIM CHI·∫æU R·∫†P</span>
      </a>
      <a routerLink="/movies" [queryParams]="{status: 'series'}" routerLinkActive="active" class="nav-item">
        <span>PHIM B·ªò</span>
      </a>
      <a routerLink="/movies" [queryParams]="{status: 'single'}" routerLinkActive="active" class="nav-item">
        <span>PHIM L·∫∫</span>
      </a>
      <a routerLink="/booking" routerLinkActive="active" class="nav-item">
        <span>ƒê·∫∂T V√â</span>
      </a>
    </div>
  </nav>

  <!-- Auth Modal -->
  <app-auth-modal *ngIf="showAuthModal" (close)="closeAuthModal()" (loginSuccess)="refreshAuthStatus()" [initialMode]="authMode"></app-auth-modal>
</header>
