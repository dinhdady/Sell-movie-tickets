# Script ƒë·ªÉ reset t·∫•t c·∫£ phim trong database
Write-Host "üîÑ Resetting all movies in database" -ForegroundColor Yellow

# L·∫•y danh s√°ch t·∫•t c·∫£ phim
Write-Host "üîç Getting all movies..." -ForegroundColor Blue
try {
    $response = Invoke-RestMethod -Uri "http://localhost:8080/api/movie" -Method GET
    $movies = $response.movies
    
    Write-Host "üìã Found $($movies.Count) movies:" -ForegroundColor Blue
    foreach ($movie in $movies) {
        Write-Host "  - $($movie.title) (ID: $($movie.id))" -ForegroundColor Cyan
    }
    
    if ($movies.Count -gt 0) {
        Write-Host "`nüóëÔ∏è Deleting all movies..." -ForegroundColor Blue
        
        foreach ($movie in $movies) {
            try {
                Write-Host "Deleting: $($movie.title)..." -ForegroundColor Yellow
                $deleteResponse = Invoke-RestMethod -Uri "http://localhost:8080/api/movie/$($movie.id)" -Method DELETE
                Write-Host "‚úÖ Deleted: $($movie.title)" -ForegroundColor Green
            } catch {
                Write-Host "‚ùå Error deleting $($movie.title): $($_.Exception.Message)" -ForegroundColor Red
            }
        }
        
        Write-Host "`n‚úÖ All movies deleted successfully!" -ForegroundColor Green
    } else {
        Write-Host "‚ÑπÔ∏è No movies found in database" -ForegroundColor Yellow
    }
    
} catch {
    Write-Host "‚ùå Error getting movies: $($_.Exception.Message)" -ForegroundColor Red
}

Write-Host "`nüèÅ Reset completed" -ForegroundColor Blue
